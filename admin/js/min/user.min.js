function login(){var e=$("#username").val(),o=$("#password").val(),a=$("#sign").val();return console.log("login()",e,o,a),""==e?($("#username").focus(),!1):""==o?(alert("คุณยังไม่ได้กรอกรหัสผ่าน!"),$("#password").focus(),!1):($.get({url:api_url,timeout:1e4,cache:!1,dataType:"json",type:"POST",data:{request:"login",username:e,password:o,sign:a},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),1==e.state?($("#btn-submit").addClass("-loading"),$("#btn-submit").html("กำลังเข้าระบบ..."),setTimeout(function(){window.location="index.php?login=success"},1e3)):0==e.state?alert("เข้าระบบไม่สำเร็จ กรุณาตรวจสอบอีกครั้ง!"):-1==e.state&&alert("คุณต้องรออีก 5 นาที เพื่อเข้าระบบใหม่!")}).fail(function(){alert("ระบบทำงานผิดพลาด กรุณาลองใหม่อีกครั้ง!"),$("#password").focus(),$("#password").val("")}),void 0)}var api_url="api.user.php";$(document).ready(function(){function e(){$editProfileDialog.fadeOut(300),$editProfileFilter.fadeOut(100)}function o(){$changePasswordDialog.fadeOut(300),$changePasswordFilter.fadeOut(100),$("#oldpassword").val(""),$("#newpassword").val(""),$("#renewpassword").val("")}var a=$("#sign").val();$btnEditProfile=$("#btnEditProfile"),$editProfileFilter=$("#editProfileFilter"),$btnSubmiteditProfile=$("#btnSubmiteditProfile"),$btnCloseEditProfile=$("#btnCloseEditProfile"),$editProfileDialog=$("#editProfileDialog"),$btnEditProfile.click(function(){$editProfileDialog.fadeIn(300),$editProfileFilter.fadeIn(100),$("#oldpassword").focus()}),$btnCloseEditProfile.click(function(){e()}),$btnSubmiteditProfile.click(function(){var e=$("#username").val(),o=$("#displayname").val();return""==e||""==o?!1:($.get({url:api_url,timeout:1e4,cache:!1,dataType:"json",type:"POST",data:{request:"edit_profile",username:e,displayname:o,sign:a},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),location.reload()}).fail(function(){alert("Fail!")}),void 0)}),$btnChangePassword=$("#btnChangePassword"),$changePasswordDialog=$("#changePasswordDialog"),$changePasswordFilter=$("#changePasswordFilter"),$btnCloseChangePassword=$("#btnCloseChangePassword"),$btnSubmitChangePassword=$("#btnSubmitChangePassword"),$btnChangePassword.click(function(){$changePasswordDialog.fadeIn(300),$changePasswordFilter.fadeIn(100),$("#oldpassword").focus()}),$btnSubmitChangePassword.click(function(){var e=$("#oldpassword").val(),o=$("#newpassword").val(),n=$("#renewpassword").val();return""==e||""==o||""==n?!1:o!=n?!1:($.get({url:api_url,timeout:1e4,cache:!1,dataType:"json",type:"POST",data:{request:"change_password",oldpassword:e,newpassword:o,sign:a},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),location.reload()}).fail(function(){alert("Fail!")}),void 0)}),$btnCloseChangePassword.click(function(){o()})});