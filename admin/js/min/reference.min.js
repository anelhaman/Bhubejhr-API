var api_url="api.reference.php";$(document).ready(function(){function e(){$createReferenceDialog.fadeOut(300),$createDialogFilter.fadeOut(300),$btnDeleteReference.fadeOut(100),$("#reference_id").val(),$("#reference_name").val(),$("#reference_description").val(),$("#reference_method").val(),$("#reference_category").val(),$("#reference_type").val(),$(".method-items").removeClass("-active"),$(".type-items").removeClass("-active"),$(".category-items").removeClass("-active")}$btnCreateReference=$("#btnCreateReference"),$createReferenceDialog=$("#createReferenceDialog"),$createDialogFilter=$("#createDialogFilter"),$btnCloseCreateReference=$("#btnCloseCreateReference"),$btnSubmitCreateReference=$("#btnSubmitCreateReference"),$btnDeleteReference=$("#btnDeleteReference"),$btnCreateReference.click(function(){$createReferenceDialog.fadeIn(100),$createDialogFilter.fadeIn(300),$("#reference_name").focus()}),$btnCloseCreateReference.click(function(){e()}),$("#referenceMethod").on("click",".method-items",function(){var e=$(this).attr("data-method");$(".method-items").removeClass("-active"),$(this).addClass("-active"),$("#reference_method").val(e)}),$("#referenceType").on("click",".type-items",function(){var e=$(this).attr("data-type");$(".type-items").removeClass("-active"),$(this).addClass("-active"),$("#reference_type").val(e)}),$("#referenceCategory").on("click",".category-items",function(){var e=$(this).attr("data-id");$(".category-items").removeClass("-active"),$(this).addClass("-active"),$("#reference_category").val(e)}),$("#reference").on("click",".btn-edit",function(){var e=$(this).parent().attr("data-id");$.ajax({url:api_url,cache:!1,dataType:"json",type:"GET",data:{request:"get",reference_id:e},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),$("#reference_id").val(e.dataset.id),$("#reference_name").val(e.dataset.name),$("#reference_description").val(e.dataset.description),$("#reference_method").val(e.dataset.method),$("#reference_category").val(e.dataset.category_id),$("#reference_type").val(e.dataset.type),$("#method-items-"+e.dataset.method).addClass("-active"),$("#type-items-"+e.dataset.type).addClass("-active"),$("#category-items-"+e.dataset.category_id).addClass("-active"),$createReferenceDialog.fadeIn(100),$btnDeleteReference.fadeIn(100),$createDialogFilter.fadeIn(300)})}),$btnSubmitCreateReference.click(function(){console.log("btnSubmitCreateReference");var e=$("#reference_id").val(),t=$("#reference_category").val(),r=$("#reference_name").val(),a=$("#reference_description").val(),n=$("#reference_method").val(),c=$("#reference_type").val();return""==r||""==n||""==c?!1:(console.log(r,n,c),$.ajax({url:api_url,cache:!1,dataType:"json",type:"POST",data:{request:"submit",reference_id:e,reference_category:t,reference_name:r,reference_description:a,reference_method:n,reference_type:c},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),location.reload()}),void 0)}),$btnDeleteReference.click(function(){var t=$("#reference_id").val(),r=$("#reference_name").val();return""==t?!1:confirm('Are you sure to delete "'+r+'"?')?($.ajax({url:api_url,cache:!1,dataType:"json",type:"POST",data:{request:"delete",reference_id:t},error:function(e){console.log("Request Error",e.responseText)}}).done(function(r){console.log(r),$("#reference"+t).remove(),e()}),void 0):!1})});